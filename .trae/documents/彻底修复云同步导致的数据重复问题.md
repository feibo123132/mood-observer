收到！这是非常硬核且有效的防御策略。

我将立即执行这两个操作：

1.  **强化 `useMoodStore` 的数据完整性**：
    *   在 `syncFromCloud` 和 `addRecord` 中，引入 `Map` 去重机制。
    *   **核心逻辑**：所有数据入库前，先通过 `Map<id, Record>` 进行过滤，确保 ID 唯一性。这不仅能解决当下的 Bug，也能防止未来的并发或网络重试导致的数据重复。

2.  **清理战场 (Auto-Cleanup)**：
    *   在 `App.tsx` 中加入一段自愈代码。
    *   逻辑：应用启动时，读取 `useMoodStore` 的 `records`，进行一次 Map 去重，如果发现长度变短了（说明有重复），立即调用 `set` 更新 Store。这能瞬间清除您本地已经污染的“幽灵数据”。

我将从修改 `src/store/useMoodStore.ts` 开始。